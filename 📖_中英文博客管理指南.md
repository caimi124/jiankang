# ğŸ“– ä¸­è‹±æ–‡åšå®¢ç®¡ç†æŒ‡å—

## âœ… ä¿®å¤å®Œæˆæ€»ç»“ï¼ˆ2025-10-30ï¼‰

### ğŸ”§ å·²ä¿®å¤çš„é—®é¢˜ï¼š
1. âœ… è‹±æ–‡åšå®¢é¡µé¢çš„ä¸­æ–‡æ–‡å­—å·²æ”¹ä¸ºè‹±æ–‡
2. âœ… Sanityæ•°æ®åº“ä¸­æ‰€æœ‰æ–‡ç« å·²æ·»åŠ  `language` å­—æ®µ
3. âœ… åšå®¢æŸ¥è¯¢å·²å®Œå…¨åˆ†ç¦»ä¸­è‹±æ–‡é€»è¾‘
4. âœ… ç§»é™¤äº†é‡å¤çš„helperå‡½æ•°å®šä¹‰
5. âœ… æ²¡æœ‰å‘ç°å¸¦ `-zh` åç¼€çš„æ··ä¹±æ•°æ®

---

## ğŸ—ï¸ å½“å‰ç³»ç»Ÿæ¶æ„

### **è‹±æ–‡åšå®¢ç³»ç»Ÿ** ğŸ‡ºğŸ‡¸
- **URLè·¯å¾„**: `/blog/*`
- **Sanityæ–‡ç« **: 5ç¯‡ï¼ˆå­˜å‚¨åœ¨CMSä¸­ï¼Œå¸¦ `language: "en"` å­—æ®µï¼‰
- **æœ¬åœ°é™æ€æ–‡ç« **: 7ç¯‡ï¼ˆç¡¬ç¼–ç åœ¨ `app/blog/page.tsx`ï¼‰
- **æ€»å…±**: 12ç¯‡è‹±æ–‡æ–‡ç« 

### **ä¸­æ–‡åšå®¢ç³»ç»Ÿ** ğŸ‡¨ğŸ‡³
- **URLè·¯å¾„**: `/zh/blog/*`
- **Sanityæ–‡ç« **: 0ç¯‡ï¼ˆç›®å‰ä¸ºç©ºï¼Œéœ€è¦æ‚¨æ·»åŠ ï¼‰
- **æŸ¥è¯¢å‡½æ•°**: å·²å‡†å¤‡å¥½ï¼Œç­‰å¾…å†…å®¹

---

## ğŸ“ å¦‚ä½•ç®¡ç†ä¸­è‹±æ–‡åšå®¢

### **æ–¹æ¡ˆ1ï¼šä½¿ç”¨Sanity CMSç®¡ç†ï¼ˆæ¨èï¼‰**

#### 1ï¸âƒ£ æ·»åŠ è‹±æ–‡æ–‡ç« åˆ°Sanity
```bash
# ç™»å½•Sanity Studio
cd e:\jiangkang\sanity
npm run dev
# è®¿é—® http://localhost:3333
```

**åˆ›å»ºæ–‡ç« æ—¶å¿…é¡»è®¾ç½®ï¼š**
- âœ… `title`: è‹±æ–‡æ ‡é¢˜
- âœ… `slug`: URLå‹å¥½çš„slugï¼ˆä¸è¦åŠ  `-zh` åç¼€ï¼ï¼‰
- âœ… `language`: é€‰æ‹© "en"
- âœ… `excerpt`: æ–‡ç« æ‘˜è¦
- âœ… `content`: æ–‡ç« æ­£æ–‡
- âœ… `status`: "published"
- âœ… `category`: é€‰æ‹©åˆ†ç±»
- âœ… `tags`: æ·»åŠ æ ‡ç­¾

#### 2ï¸âƒ£ æ·»åŠ ä¸­æ–‡æ–‡ç« åˆ°Sanity
```bash
# åŒæ ·ç™»å½•Sanity Studio
cd e:\jiangkang\sanity
npm run dev
```

**åˆ›å»ºä¸­æ–‡æ–‡ç« æ—¶å¿…é¡»è®¾ç½®ï¼š**
- âœ… `title`: ä¸­æ–‡æ ‡é¢˜ï¼ˆä¾‹å¦‚ï¼š"çº¢æ´‹è‘±vsç™½æ´‹è‘±ï¼šå“ªä¸ªæ›´å¥åº·ï¼Ÿ"ï¼‰
- âœ… `slug`: **ä½¿ç”¨ä¸è‹±æ–‡ç›¸åŒçš„slug**ï¼ˆä¾‹å¦‚ï¼š"red-onion-vs-white-onion-health-benefits"ï¼‰
  - âš ï¸ **æ³¨æ„ï¼šä¸è¦æ·»åŠ  `-zh` åç¼€ï¼**
- âœ… `language`: é€‰æ‹© "zh"
- âœ… `excerpt`: ä¸­æ–‡æ‘˜è¦
- âœ… `content`: ä¸­æ–‡æ­£æ–‡
- âœ… `status`: "published"
- âœ… `category`: ä¸­æ–‡åˆ†ç±»
- âœ… `tags`: ä¸­æ–‡æ ‡ç­¾

**é‡è¦è§„åˆ™ï¼š**
- âœ… ä¸­è‹±æ–‡ä½¿ç”¨ç›¸åŒçš„slugï¼Œé€šè¿‡ `language` å­—æ®µåŒºåˆ†
- âœ… URLè‡ªåŠ¨è·¯ç”±ï¼š
  - è‹±æ–‡ï¼š`/blog/red-onion-vs-white-onion-health-benefits`
  - ä¸­æ–‡ï¼š`/zh/blog/red-onion-vs-white-onion-health-benefits`
- âŒ ä¸è¦åœ¨slugä¸­æ·»åŠ  `-en` æˆ– `-zh` åç¼€

---

### **æ–¹æ¡ˆ2ï¼šä½¿ç”¨è„šæœ¬æ‰¹é‡æ·»åŠ **

#### åˆ›å»ºè‹±æ–‡æ–‡ç« è„šæœ¬ç¤ºä¾‹ï¼š
```javascript
// scripts/add-blog-post-en.js
const { createClient } = require('@sanity/client');

const client = createClient({
  projectId: '13rzzwgz',
  dataset: 'production',
  apiVersion: '2024-01-01',
  useCdn: false,
  token: 'YOUR_TOKEN_HERE'
});

async function addEnglishPost() {
  const post = await client.create({
    _type: 'blogPost',
    title: 'Your English Title',
    slug: {
      _type: 'slug',
      current: 'your-article-slug'
    },
    language: 'en',  // è‹±æ–‡
    excerpt: 'Your excerpt here...',
    content: [
      {
        _type: 'block',
        children: [{_type: 'span', text: 'Your content here...'}]
      }
    ],
    publishedAt: new Date().toISOString(),
    readTime: 8,
    featured: false,
    status: 'published',
    author: { _ref: 'AUTHOR_REF' },
    category: { _ref: 'CATEGORY_REF' },
    tags: [{ _ref: 'TAG_REF_1' }]
  });
  
  console.log('âœ… è‹±æ–‡æ–‡ç« å·²åˆ›å»º:', post._id);
}

addEnglishPost();
```

#### åˆ›å»ºä¸­æ–‡æ–‡ç« è„šæœ¬ç¤ºä¾‹ï¼š
```javascript
// scripts/add-blog-post-zh.js
const { createClient } = require('@sanity/client');

const client = createClient({
  projectId: '13rzzwgz',
  dataset: 'production',
  apiVersion: '2024-01-01',
  useCdn: false,
  token: 'YOUR_TOKEN_HERE'
});

async function addChinesePost() {
  const post = await client.create({
    _type: 'blogPost',
    title: 'æ‚¨çš„ä¸­æ–‡æ ‡é¢˜',
    slug: {
      _type: 'slug',
      current: 'your-article-slug'  // ä¸è‹±æ–‡ç›¸åŒï¼
    },
    language: 'zh',  // ä¸­æ–‡
    excerpt: 'æ‚¨çš„ä¸­æ–‡æ‘˜è¦...',
    content: [
      {
        _type: 'block',
        children: [{_type: 'span', text: 'æ‚¨çš„ä¸­æ–‡å†…å®¹...'}]
      }
    ],
    publishedAt: new Date().toISOString(),
    readTime: 8,
    featured: false,
    status: 'published',
    author: { _ref: 'AUTHOR_REF' },
    category: { _ref: 'CATEGORY_REF' },
    tags: [{ _ref: 'TAG_REF_1' }]
  });
  
  console.log('âœ… ä¸­æ–‡æ–‡ç« å·²åˆ›å»º:', post._id);
}

addChinesePost();
```

---

## ğŸ¯ ç¿»è¯‘è‹±æ–‡æ–‡ç« åˆ°ä¸­æ–‡çš„æ­£ç¡®æµç¨‹

### **æ­¥éª¤1ï¼šå‡†å¤‡ç¿»è¯‘å†…å®¹**
1. é€‰æ‹©ä¸€ç¯‡è‹±æ–‡æ–‡ç« ï¼ˆä¾‹å¦‚ï¼šRed Onion vs White Onionï¼‰
2. å°†æ ‡é¢˜ã€æ‘˜è¦ã€æ­£æ–‡ç¿»è¯‘æˆä¸­æ–‡
3. ä¿æŒç›¸åŒçš„æ–‡ç« ç»“æ„å’Œæ ¼å¼

### **æ­¥éª¤2ï¼šåœ¨Sanityåˆ›å»ºä¸­æ–‡ç‰ˆæœ¬**
```javascript
// scripts/translate-article.js
const { createClient } = require('@sanity/client');

const client = createClient({
  projectId: '13rzzwgz',
  dataset: 'production',
  apiVersion: '2024-01-01',
  useCdn: false,
  token: 'sk7J8olzdUL0U66G5UXJXrhATzLAQ8LxVLqFpkcfbSL5Nusr5MT7kc0QRBdU49YLVgSbgryxhk4gEmqUghhZ5haAym9DvhTubA2Hu7Z2nnG18zOXN0oDegpO8t6MhPcEzRsniIwiRgPSQQsZlqgjJZ6aX7YqiFlH67iH6pC9vWEontHNkWAp'
});

async function translateArticleToZh() {
  try {
    // 1. è·å–è‹±æ–‡åŸæ–‡ï¼ˆå¦‚æœåœ¨Sanityä¸­ï¼‰
    const enPost = await client.fetch(`*[_type == "blogPost" && slug.current == "red-onion-vs-white-onion-health-benefits" && language == "en"][0]`);
    
    if (!enPost) {
      console.log('âš ï¸ æœªæ‰¾åˆ°è‹±æ–‡åŸæ–‡');
      return;
    }
    
    // 2. åˆ›å»ºä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬
    const zhPost = await client.create({
      _type: 'blogPost',
      title: 'çº¢æ´‹è‘±vsç™½æ´‹è‘±ï¼šå“ªä¸ªæ›´å¥åº·ï¼Ÿï¼ˆç§‘å­¦å¯¹æ¯”ï¼‰',
      slug: {
        _type: 'slug',
        current: enPost.slug.current  // ä½¿ç”¨ç›¸åŒçš„slugï¼
      },
      language: 'zh',  // è®¾ç½®ä¸ºä¸­æ–‡
      excerpt: 'çº¢æ´‹è‘±å’Œç™½æ´‹è‘±ï¼Œå“ªä¸ªæ›´å¥åº·ï¼Ÿå‘ç°æŠ—æ°§åŒ–å‰‚ã€æ§²çš®ç´ ã€èŠ±é’ç´ ã€æ¶ˆåŒ–ç›Šå¤„çš„å…³é”®å·®å¼‚ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ä»¥è·å¾—æœ€å¤§å¥åº·æ•ˆç›Šã€‚',
      content: [
        {
          _type: 'block',
          style: 'h2',
          children: [{_type: 'span', text: 'å¿«é€Ÿç­”æ¡ˆï¼šçº¢æ´‹è‘±åœ¨æŠ—æ°§åŒ–å‰‚æ–¹é¢èƒœå‡ºï¼Œç™½æ´‹è‘±åœ¨æ¶ˆåŒ–æ€§æ–¹é¢èƒœå‡º'}]
        },
        // ... æ·»åŠ æ›´å¤šä¸­æ–‡å†…å®¹å—
      ],
      publishedAt: new Date().toISOString(),
      readTime: 8,
      featured: true,
      status: 'published',
      author: enPost.author,  // ä½¿ç”¨ç›¸åŒä½œè€…
      category: enPost.category,  // æˆ–åˆ›å»ºä¸­æ–‡åˆ†ç±»
      tags: enPost.tags  // æˆ–åˆ›å»ºä¸­æ–‡æ ‡ç­¾
    });
    
    console.log('âœ… ä¸­æ–‡ç¿»è¯‘å·²åˆ›å»º:', zhPost._id);
    console.log(`   è‹±æ–‡URL: /blog/${enPost.slug.current}`);
    console.log(`   ä¸­æ–‡URL: /zh/blog/${zhPost.slug.current}`);
    
  } catch (error) {
    console.error('âŒ é”™è¯¯:', error.message);
  }
}

translateArticleToZh();
```

### **æ­¥éª¤3ï¼šè¿è¡Œè„šæœ¬**
```bash
cd e:\jiangkang
node scripts/translate-article.js
```

---

## ğŸ” éªŒè¯æ–‡ç« æ˜¯å¦æ­£ç¡®

### **æ£€æŸ¥è„šæœ¬**
```bash
# è¿è¡Œæ£€æŸ¥è„šæœ¬
cd e:\jiangkang
node scripts/check-blog-posts.js
```

### **è®¿é—®é¡µé¢éªŒè¯**
- è‹±æ–‡åšå®¢åˆ—è¡¨ï¼šhttps://herbscience.shop/blog
- ä¸­æ–‡åšå®¢åˆ—è¡¨ï¼šhttps://herbscience.shop/zh/blog
- è‹±æ–‡æ–‡ç« ï¼šhttps://herbscience.shop/blog/article-slug
- ä¸­æ–‡æ–‡ç« ï¼šhttps://herbscience.shop/zh/blog/article-slug

---

## âš ï¸ å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ³•

### âŒ é”™è¯¯1ï¼šURLå¸¦ `-zh` åç¼€
**é”™è¯¯ç¤ºä¾‹**ï¼š`/blog/article-slug-zh`

**åŸå› **ï¼šåœ¨Sanityåˆ›å»ºæ–‡ç« æ—¶ï¼Œslugä¸­åŒ…å«äº† `-zh` åç¼€

**è§£å†³æ–¹æ³•**ï¼š
1. åœ¨Sanity Studioä¸­æ‰¾åˆ°è¯¥æ–‡ç« 
2. ç¼–è¾‘slugï¼Œç§»é™¤ `-zh` åç¼€
3. ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²

### âŒ é”™è¯¯2ï¼šè‹±æ–‡é¡µé¢æ˜¾ç¤ºä¸­æ–‡å†…å®¹
**åŸå› **ï¼šæ–‡ç« çš„ `language` å­—æ®µè®¾ç½®é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
```bash
# è¿è¡Œä¿®å¤è„šæœ¬
node scripts/fix-language-field.js
```

### âŒ é”™è¯¯3ï¼šä¸­æ–‡é¡µé¢æ‰¾ä¸åˆ°æ–‡ç« 
**åŸå› **ï¼š
1. æ–‡ç« çš„ `language` ä¸æ˜¯ "zh"
2. æˆ–è€… `status` ä¸æ˜¯ "published"

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥Sanity Studioä¸­çš„æ–‡ç« è®¾ç½®
2. ç¡®ä¿ `language="zh"` ä¸” `status="published"`

---

## ğŸš€ éƒ¨ç½²æ›´æ–°

æ¯æ¬¡æ·»åŠ æ–°æ–‡ç« åï¼Œéœ€è¦é‡æ–°éƒ¨ç½²ï¼š

```bash
# æ–¹å¼1ï¼šæ¨é€åˆ°Gitï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰
git add .
git commit -m "Add new blog posts"
git push origin main

# æ–¹å¼2ï¼šåœ¨Vercelæ‰‹åŠ¨è§¦å‘éƒ¨ç½²
# è®¿é—® https://vercel.com/dashboard
```

---

## ğŸ“Š å½“å‰æ•°æ®åº“çŠ¶æ€

### Sanity CMS æ–‡ç« ç»Ÿè®¡ï¼š
- è‹±æ–‡æ–‡ç« ï¼š5ç¯‡ï¼ˆå…¨éƒ¨å¸¦ `language: "en"`ï¼‰
- ä¸­æ–‡æ–‡ç« ï¼š0ç¯‡ï¼ˆç­‰å¾…æ·»åŠ ï¼‰

### æœ¬åœ°é™æ€æ–‡ç« ï¼ˆç¡¬ç¼–ç ï¼‰ï¼š
- 7ç¯‡è‹±æ–‡æ–‡ç« ï¼ˆåœ¨ `app/blog/page.tsx` ä¸­ï¼‰
- å»ºè®®ï¼šé€æ­¥è¿ç§»åˆ°Sanityè¿›è¡Œç»Ÿä¸€ç®¡ç†

---

## ğŸ› ï¸ æœ‰ç”¨çš„è„šæœ¬

### æ£€æŸ¥æ‰€æœ‰æ–‡ç« 
```bash
node scripts/check-blog-posts.js
```

### æ·»åŠ languageå­—æ®µ
```bash
node scripts/add-language-field-to-posts.js
```

### ç¿»è¯‘æ–‡ç« 
```bash
node scripts/translate-article.js
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. è¿è¡Œ `node scripts/check-blog-posts.js` æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
2. æŸ¥çœ‹Sanity Studio: `cd sanity && npm run dev`
3. æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼š`npm run build`

---

## âœ… æœ€ä½³å®è·µæ€»ç»“

1. **è¯­è¨€åˆ†ç¦»**ï¼šé€šè¿‡ `language` å­—æ®µåŒºåˆ†ï¼Œä¸åœ¨slugä¸­æ·»åŠ åç¼€
2. **ç›¸åŒslug**ï¼šä¸­è‹±æ–‡æ–‡ç« ä½¿ç”¨ç›¸åŒçš„slugï¼ŒURLé€šè¿‡è·¯å¾„å‰ç¼€åŒºåˆ†
3. **ç»Ÿä¸€ç®¡ç†**ï¼šå°½é‡ä½¿ç”¨Sanity CMSç®¡ç†æ‰€æœ‰æ–‡ç« 
4. **å®šæœŸæ£€æŸ¥**ï¼šä½¿ç”¨è„šæœ¬å®šæœŸæ£€æŸ¥æ•°æ®åº“çŠ¶æ€
5. **æµ‹è¯•éªŒè¯**ï¼šæ·»åŠ æ–‡ç« åæ€»æ˜¯è®¿é—®URLè¿›è¡ŒéªŒè¯

---

**æ—¥æœŸ**: 2025-10-30  
**çŠ¶æ€**: âœ… ç³»ç»Ÿå·²ä¿®å¤å¹¶ä¼˜åŒ–  
**ä¸‹ä¸€æ­¥**: å¼€å§‹æ·»åŠ ä¸­æ–‡ç¿»è¯‘æ–‡ç« 

