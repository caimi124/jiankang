const { Client } = require("@notionhq/client");

// Notioné›†æˆé…ç½®
const notion = new Client({ 
  auth: "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" 
});

const databaseId = "2156f14b923c802c8d48d84247b6681a";

// å®Œæ•´çš„è‰è¯æ•°æ®åº“
const herbsData = [
  {
    herbName: "Turmeric",
    chineseName: "å§œé»„",
    briefDescription: "æŠ—ç‚ã€å…³èŠ‚ç–¼ç—›ã€è‚ èƒƒè°ƒèŠ‚",
    composition: "å§œé»„ç´ ã€æŒ¥å‘æ²¹",
    recommendedDosage: "æ¯æ—¥ 300-500mg",
    efficacyCategory: ["æ¶ˆåŒ–å¥åº·", "ç‚ç—‡ç®¡ç†"],
    usageRecommendations: "é¥­åæœç”¨ï¼Œé¿å…ç©ºè…¹",
    safetyLevel: "é«˜",
    precautions: "å­•å¦‡ç¦ç”¨",
    tcmConstitution: "æ¹¿çƒ­ä½“è´¨",
    caseStudy: "ç”¨æˆ·Aæœç”¨3ä¸ªæœˆï¼Œæ”¹å–„å…³èŠ‚ç–¼ç—›"
  },
  {
    herbName: "Ginseng",
    chineseName: "äººå‚",
    briefDescription: "è¡¥æ°”å…»è¡€ã€å¢å¼ºä½“è´¨",
    composition: "äººå‚çš‚è‹·ã€å¤šç³–",
    recommendedDosage: "æ¯æ—¥ 200-400mg",
    efficacyCategory: ["èƒ½é‡æå‡", "å…ç–«æ”¯æŒ"],
    usageRecommendations: "æ—©æ™¨æœç”¨ï¼Œé¿å…æ™šé—´",
    safetyLevel: "é«˜",
    precautions: "é«˜è¡€å‹æ‚£è€…æ…ç”¨",
    tcmConstitution: "æ°”è™šä½“è´¨",
    caseStudy: "ç”¨æˆ·Bæœç”¨2ä¸ªæœˆï¼Œç²¾åŠ›æ˜æ˜¾æ”¹å–„"
  },
  {
    herbName: "Licorice",
    chineseName: "ç”˜è‰",
    briefDescription: "ç¼“è§£å’³å—½ã€æ¶ˆç‚æŠ—èŒ",
    composition: "ç”˜è‰é…¸ã€é»„é…®ç±»",
    recommendedDosage: "æ¯æ—¥ 100-300mg",
    efficacyCategory: ["å‘¼å¸ç³»ç»Ÿ", "æ¶ˆåŒ–å¥åº·"],
    usageRecommendations: "é¥­åæœç”¨ï¼Œé¿å…è¿‡é‡",
    safetyLevel: "ä¸­",
    precautions: "é•¿æœŸæœç”¨éœ€ç›‘æµ‹è¡€å‹",
    tcmConstitution: "æ°”è™šä½“è´¨",
    caseStudy: "ç”¨æˆ·Cæœç”¨1ä¸ªæœˆï¼Œå’³å—½æ˜æ˜¾ç¼“è§£"
  },
  {
    herbName: "Echinacea",
    chineseName: "ç´«ç»´èŠ",
    briefDescription: "å¢å¼ºå…ç–«ã€æŠ—ç—…æ¯’",
    composition: "å¤šç³–ã€çƒ·åŸºé…°èƒº",
    recommendedDosage: "æ¯æ—¥ 400-900mg",
    efficacyCategory: ["å…ç–«æ”¯æŒ", "æŠ—ç—…æ¯’"],
    usageRecommendations: "æ—©æ™šæœç”¨ï¼Œæ„Ÿå†’åˆæœŸä½¿ç”¨",
    safetyLevel: "é«˜",
    precautions: "è¿‡æ•ä½“è´¨æ…ç”¨",
    tcmConstitution: "ä½“è´¨åå¯’",
    caseStudy: "ç”¨æˆ·Dåœ¨æ„Ÿå†’å­£èŠ‚æœç”¨ï¼Œæ„Ÿå†’æ¬¡æ•°å‡å°‘"
  },
  {
    herbName: "Peppermint",
    chineseName: "è–„è·",
    briefDescription: "ç¼“è§£æ¶ˆåŒ–ä¸è‰¯ã€æ¸…çƒ­è§£æ¯’",
    composition: "è–„è·è„‘ã€è–„è·é…®",
    recommendedDosage: "æ¯æ—¥ 150-300mg",
    efficacyCategory: ["æ¶ˆåŒ–å¥åº·", "å‘¼å¸ç³»ç»Ÿ"],
    usageRecommendations: "é¥­åæœç”¨ï¼Œé¿å…è¿‡é‡",
    safetyLevel: "é«˜",
    precautions: "å„¿ç«¥æ…ç”¨",
    tcmConstitution: "æ¹¿çƒ­ä½“è´¨",
    caseStudy: "ç”¨æˆ·Eæœç”¨2å‘¨ï¼Œèƒƒéƒ¨ä¸é€‚å‡è½»"
  },
  {
    herbName: "Chamomile",
    chineseName: "æ´‹ç”˜èŠ",
    briefDescription: "ä¿ƒè¿›ç¡çœ ã€ç¼“è§£ç„¦è™‘",
    composition: "æŒ¥å‘æ²¹ã€é»„é…®ç±»",
    recommendedDosage: "æ¯æ—¥ 200-400mg",
    efficacyCategory: ["ç¡çœ æ”¯æŒ", "æƒ…ç»ªç®¡ç†"],
    usageRecommendations: "ç¡å‰æœç”¨ï¼Œå¯æ³¡èŒ¶é¥®ç”¨",
    safetyLevel: "é«˜",
    precautions: "å­•å¦‡æ…ç”¨",
    tcmConstitution: "æ°”è™šä½“è´¨",
    caseStudy: "ç”¨æˆ·Fæœç”¨1ä¸ªæœˆï¼Œç¡çœ è´¨é‡æé«˜"
  },
  {
    herbName: "Ginger",
    chineseName: "ç”Ÿå§œ",
    briefDescription: "æŠ—ç‚ã€ä¿ƒæ¶ˆåŒ–ã€æ­¢å‘•",
    composition: "å§œè¾£ç´ ã€æŒ¥å‘æ²¹",
    recommendedDosage: "æ¯æ—¥ 250-1000mg",
    efficacyCategory: ["æ¶ˆåŒ–å¥åº·", "æŠ—ç‚ä½œç”¨"],
    usageRecommendations: "é¥­åæœç”¨ï¼Œå¯é…åˆæ¸©æ°´",
    safetyLevel: "é«˜",
    precautions: "èƒƒæºƒç–¡æ‚£è€…æ…ç”¨",
    tcmConstitution: "æ¹¿å¯’ä½“è´¨",
    caseStudy: "ç”¨æˆ·Gæœç”¨3ä¸ªæœˆï¼Œæ¶ˆåŒ–åŠŸèƒ½æ”¹å–„"
  },
  {
    herbName: "Ashwagandha",
    chineseName: "å°åº¦äººå‚",
    briefDescription: "æŠ—å‹åŠ›ã€é€‚åº”åŸè‰è¯",
    composition: "withanolidesã€ç”Ÿç‰©ç¢±",
    recommendedDosage: "æ¯æ—¥ 300-600mg",
    efficacyCategory: ["å‹åŠ›ä¸ç„¦è™‘", "èƒ½é‡æå‡"],
    usageRecommendations: "æ—©æ™šæœç”¨ï¼Œç©ºè…¹æˆ–é¤åå‡å¯",
    safetyLevel: "é«˜",
    precautions: "å­•å¦‡ç¦ç”¨",
    tcmConstitution: "æ°”è™šä½“è´¨",
    caseStudy: "ç”¨æˆ·Hæœç”¨2ä¸ªæœˆï¼Œç„¦è™‘æ„Ÿé™ä½"
  },
  {
    herbName: "Milk Thistle",
    chineseName: "å¥¶è“Ÿè‰",
    briefDescription: "ä¿æŠ¤è‚è„ã€è§£æ¯’æ’ä½™",
    composition: "æ°´é£è“Ÿç´ ã€é»„é…®ç±»",
    recommendedDosage: "æ¯æ—¥ 200-400mg",
    efficacyCategory: ["è‚è„å¥åº·", "è§£æ¯’æ”¯æŒ"],
    usageRecommendations: "é¥­åæœç”¨ï¼Œé…åˆå……è¶³æ°´åˆ†",
    safetyLevel: "é«˜",
    precautions: "è¿‡æ•è€…æ…ç”¨",
    tcmConstitution: "æ¹¿çƒ­ä½“è´¨",
    caseStudy: "ç”¨æˆ·Iæœç”¨3ä¸ªæœˆï¼Œè‚åŠŸèƒ½æ”¹å–„"
  },
  {
    herbName: "Valerian",
    chineseName: "ç¼¬è‰",
    briefDescription: "ä¿ƒè¿›ç¡çœ ã€é•‡é™å®‰ç¥",
    composition: "æŒ¥å‘æ²¹ã€ç¼¬è‰é…¸ç±»",
    recommendedDosage: "æ¯æ—¥ 400-900mg",
    efficacyCategory: ["ç¡çœ æ”¯æŒ", "æƒ…ç»ªç®¡ç†"],
    usageRecommendations: "ç¡å‰æœç”¨ï¼Œé¿å…ç™½å¤©ä½¿ç”¨",
    safetyLevel: "é«˜",
    precautions: "å­•å¦‡æ…ç”¨",
    tcmConstitution: "æ°”è™šä½“è´¨",
    caseStudy: "ç”¨æˆ·Jæœç”¨1ä¸ªæœˆï¼Œå…¥ç¡æ—¶é—´ç¼©çŸ­"
  }
];

// ç”Ÿæˆè¯¦ç»†å†…å®¹å‡½æ•°
function generateDetailedContent(herb) {
  return `# ${herb.herbName} (${herb.chineseName})

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯
**è‰è¯åç§°**: ${herb.herbName}
**ä¸­æ–‡å**: ${herb.chineseName}
**ç®€è¦æè¿°**: ${herb.briefDescription}

## ğŸ§ª æˆåˆ†æ„æˆ
${herb.composition}

${getCompositionDetails(herb.herbName)}

## ğŸ’Š æ¨èå‰‚é‡
**æ ‡å‡†å‰‚é‡**: ${herb.recommendedDosage}

**å…·ä½“å»ºè®®**:
${getDosageRecommendations(herb.herbName)}

## ğŸ¯ åŠŸæ•ˆåˆ†ç±»
**ä¸»è¦åŠŸæ•ˆ**: ${herb.efficacyCategory.join('ï¼›')}

**è¯¦ç»†åŠŸæ•ˆ**:
${getDetailedEfficacy(herb.herbName)}

## ğŸ“– ä½¿ç”¨å»ºè®®
**æœ€ä½³æœç”¨æ–¹å¼**: ${herb.usageRecommendations}

**è¯¦ç»†æŒ‡å¯¼**:
${getUsageGuidance(herb.herbName)}

## ğŸ›¡ï¸ å®‰å…¨æ€§è¯„ä¼°
**å®‰å…¨æ€§ç­‰çº§**: ${herb.safetyLevel}

**é£é™©è¯„ä¼°**:
${getSafetyAssessment(herb.safetyLevel)}

## âš ï¸ æ³¨æ„äº‹é¡¹ä¸ç¦å¿Œ
**ä¸»è¦ç¦å¿Œ**: ${herb.precautions}

**è¯¦ç»†æ³¨æ„äº‹é¡¹**:
${getDetailedPrecautions(herb.herbName)}

## ğŸ¥ ä¸­åŒ»ä½“è´¨åŒ¹é…
**é€‚å®œä½“è´¨**: ${herb.tcmConstitution}

**ä½“è´¨åˆ†æ**:
${getTCMAnalysis(herb.tcmConstitution)}

## ğŸ“Š ä¸´åºŠæ¡ˆä¾‹åˆ†æ
**æ¡ˆä¾‹ç ”ç©¶**: ${herb.caseStudy}

**è¯¦ç»†æ¡ˆä¾‹**:
${getCaseStudies(herb.herbName)}

## ğŸ“ˆ ä½¿ç”¨å»ºè®®æ€»ç»“
${getUsageSummary(herb.herbName)}

---
*æœ¬ä¿¡æ¯ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆåŒ»ç–—å»ºè®®ã€‚ä½¿ç”¨å‰è¯·å’¨è¯¢ä¸“ä¸šåŒ»ç–—äººå‘˜ã€‚*`;
}

// è¾…åŠ©å‡½æ•°
function getCompositionDetails(herbName) {
  const details = {
    "Turmeric": "å§œé»„çš„ä¸»è¦æ´»æ€§æˆåˆ†å§œé»„ç´ (Curcumin)æ˜¯ä¸€ç§å¼ºæ•ˆçš„æŠ—ç‚åŒ–åˆç‰©ï¼Œå…·æœ‰æ˜¾è‘—çš„æŠ—æ°§åŒ–ç‰¹æ€§ã€‚æŒ¥å‘æ²¹æˆåˆ†åˆ™ä¸ºå§œé»„æä¾›äº†ç‹¬ç‰¹çš„èŠ³é¦™å’Œè¾…åŠ©çš„ç”Ÿç‰©æ´»æ€§ã€‚",
    "Ginseng": "äººå‚çš‚è‹·æ˜¯äººå‚çš„æ ¸å¿ƒæ´»æ€§æˆåˆ†ï¼Œå…·æœ‰é€‚åº”åŸä½œç”¨ï¼Œèƒ½å¸®åŠ©æœºä½“é€‚åº”å„ç§å‹åŠ›ã€‚å¤šç³–æˆåˆ†åˆ™å¢å¼ºå…ç–«ç³»ç»ŸåŠŸèƒ½ã€‚",
    "Licorice": "ç”˜è‰é…¸å…·æœ‰å¼ºæ•ˆçš„æŠ—ç‚å’ŒæŠ—ç—…æ¯’ç‰¹æ€§ï¼Œé»„é…®ç±»åŒ–åˆç‰©åˆ™æä¾›é¢å¤–çš„æŠ—æ°§åŒ–ä¿æŠ¤ã€‚",
    "Echinacea": "å¤šç³–æˆåˆ†æ˜¯ç´«ç»´èŠå¢å¼ºå…ç–«åŠŸèƒ½çš„å…³é”®ï¼Œçƒ·åŸºé…°èƒºåˆ™å…·æœ‰æŠ—ç‚å’ŒæŠ—èŒä½œç”¨ã€‚",
    "Peppermint": "è–„è·è„‘æ˜¯è–„è·ç‰¹æœ‰çš„æ¸…å‡‰æˆåˆ†ï¼Œå…·æœ‰é•‡ç—›å’ŒæŠ—ç—‰æŒ›ä½œç”¨ï¼Œè–„è·é…®åˆ™æä¾›æ¶ˆåŒ–ç³»ç»Ÿæ”¯æŒã€‚",
    "Chamomile": "æ´‹ç”˜èŠçš„æŒ¥å‘æ²¹å«æœ‰å¤šç§é•‡é™æˆåˆ†ï¼Œé»„é…®ç±»åŒ–åˆç‰©åˆ™å…·æœ‰æŠ—ç‚å’ŒæŠ—ç„¦è™‘ç‰¹æ€§ã€‚",
    "Ginger": "å§œè¾£ç´ æ˜¯ç”Ÿå§œçš„ä¸»è¦è¾›è¾£æˆåˆ†ï¼Œå…·æœ‰å¼ºæ•ˆçš„æŠ—ç‚å’ŒæŠ—æ¶å¿ƒä½œç”¨ï¼ŒæŒ¥å‘æ²¹åˆ™æä¾›èŠ³é¦™å’Œæ¶ˆåŒ–æ”¯æŒã€‚",
    "Ashwagandha": "Withanolidesæ˜¯å°åº¦äººå‚çš„å…³é”®é€‚åº”åŸæˆåˆ†ï¼Œèƒ½å¸®åŠ©ç¼“è§£å‹åŠ›å’Œæé«˜èƒ½é‡æ°´å¹³ã€‚",
    "Milk Thistle": "æ°´é£è“Ÿç´ æ˜¯å¥¶è“Ÿè‰çš„æ ¸å¿ƒæˆåˆ†ï¼Œä¸“é—¨ç”¨äºè‚è„ä¿æŠ¤å’Œä¿®å¤ï¼Œé»„é…®ç±»åŒ–åˆç‰©å¢å¼ºå…¶æŠ—æ°§åŒ–æ•ˆæœã€‚",
    "Valerian": "ç¼¬è‰çš„æŒ¥å‘æ²¹å«æœ‰å¤šç§é•‡é™æˆåˆ†ï¼Œç¼¬è‰é…¸ç±»åŒ–åˆç‰©åˆ™ç›´æ¥ä½œç”¨äºç¥ç»ç³»ç»Ÿï¼Œä¿ƒè¿›æ”¾æ¾å’Œç¡çœ ã€‚"
  };
  return details[herbName] || "è¯¥è‰è¯å«æœ‰å¤šç§ç”Ÿç‰©æ´»æ€§æˆåˆ†ï¼Œå…·æœ‰ç‹¬ç‰¹çš„è¯ç†ä½œç”¨ã€‚";
}

function getDosageRecommendations(herbName) {
  const recommendations = {
    "Turmeric": "- åˆæ¬¡ä½¿ç”¨è€…: å»ºè®®ä»æ¯æ—¥200mgå¼€å§‹\n- ä¸€èˆ¬ä¿å¥: æ¯æ—¥300-400mg\n- ç‚ç—‡ç®¡ç†: æ¯æ—¥400-500mg\n- è¯·éµå¾ªäº§å“æ ‡ç­¾è¯´æ˜æˆ–å’¨è¯¢ä¸“ä¸šäººå£«",
    "Ginseng": "- åˆæ¬¡ä½¿ç”¨è€…: å»ºè®®ä»æ¯æ—¥100mgå¼€å§‹\n- ä¸€èˆ¬ä¿å¥: æ¯æ—¥200-300mg\n- ä½“åŠ›æå‡: æ¯æ—¥300-400mg\n- å»ºè®®å‘¨æœŸæ€§ä½¿ç”¨ï¼Œè¿ç»­ä½¿ç”¨2-3ä¸ªæœˆåä¼‘æ¯",
    "Licorice": "- åˆæ¬¡ä½¿ç”¨è€…: å»ºè®®ä»æ¯æ—¥50mgå¼€å§‹\n- å‘¼å¸æ”¯æŒ: æ¯æ—¥100-200mg\n- æ¶ˆåŒ–æ”¹å–„: æ¯æ—¥200-300mg\n- ä¸å»ºè®®é•¿æœŸå¤§å‰‚é‡ä½¿ç”¨",
    "Echinacea": "- é¢„é˜²ç”¨é€”: æ¯æ—¥400-600mg\n- æ€¥æ€§æœŸ: æ¯æ—¥600-900mg\n- å„¿ç«¥ç”¨é‡: æˆäººå‰‚é‡çš„1/2\n- å»ºè®®çŸ­æœŸä½¿ç”¨ï¼Œä¸è¶…è¿‡8å‘¨",
    "Peppermint": "- æ¶ˆåŒ–ä¸è‰¯: æ¯æ—¥150-200mg\n- è‚ èƒƒç—‰æŒ›: æ¯æ—¥200-300mg\n- å„¿ç«¥ç”¨é‡: æˆäººå‰‚é‡çš„1/3\n- å¯æ ¹æ®éœ€è¦è°ƒæ•´å‰‚é‡",
    "Chamomile": "- è½»åº¦ç„¦è™‘: æ¯æ—¥200-300mg\n- ç¡çœ æ”¹å–„: æ¯æ—¥300-400mg\n- å„¿ç«¥ç”¨é‡: æˆäººå‰‚é‡çš„1/2\n- å¯åˆ¶æˆèŒ¶é¥®ï¼Œæ¯æ—¥2-3æ¯",
    "Ginger": "- æ¶ˆåŒ–æ”¯æŒ: æ¯æ—¥250-500mg\n- æŠ—ç‚ç”¨é€”: æ¯æ—¥500-1000mg\n- å­•æœŸæ¶å¿ƒ: æ¯æ—¥250mgï¼Œéœ€åŒ»ç”ŸæŒ‡å¯¼\n- å¯æ–°é²œé£Ÿç”¨æˆ–åˆ¶æˆèŒ¶é¥®",
    "Ashwagandha": "- åˆæ¬¡ä½¿ç”¨: æ¯æ—¥300mg\n- å‹åŠ›ç®¡ç†: æ¯æ—¥400-500mg\n- ä½“åŠ›æå‡: æ¯æ—¥500-600mg\n- å»ºè®®åˆ†ä¸¤æ¬¡æœç”¨ï¼Œæ—©æ™šå„ä¸€æ¬¡",
    "Milk Thistle": "- è‚è„ä¿å¥: æ¯æ—¥200-300mg\n- è‚è„ä¿®å¤: æ¯æ—¥300-400mg\n- å»ºè®®é¥­åæœç”¨ï¼Œæé«˜å¸æ”¶ç‡\n- å¯é•¿æœŸä½¿ç”¨ï¼Œå®šæœŸæ£€æŸ¥è‚åŠŸèƒ½",
    "Valerian": "- è½»åº¦å¤±çœ : æ¯æ—¥400-600mg\n- ä¸¥é‡å¤±çœ : æ¯æ—¥600-900mg\n- å»ºè®®ç¡å‰30-60åˆ†é’Ÿæœç”¨\n- å¯ä¸å…¶ä»–é•‡é™è‰è¯é…åˆä½¿ç”¨"
  };
  return recommendations[herbName] || "- è¯·éµå¾ªäº§å“è¯´æ˜æˆ–å’¨è¯¢ä¸“ä¸šäººå£«\n- ä»å°å‰‚é‡å¼€å§‹ï¼Œé€æ¸è°ƒæ•´\n- æ³¨æ„è§‚å¯Ÿèº«ä½“ååº”";
}

function getDetailedEfficacy(herbName) {
  const efficacy = {
    "Turmeric": "- **æ¶ˆåŒ–ç³»ç»Ÿ**: ä¿ƒè¿›èƒ†æ±åˆ†æ³Œï¼Œæ”¹å–„æ¶ˆåŒ–åŠŸèƒ½ï¼Œç¼“è§£è‚ èƒƒä¸é€‚\n- **ç‚ç—‡ç®¡ç†**: å¤©ç„¶æŠ—ç‚ä½œç”¨ï¼Œæœ‰åŠ©ç¼“è§£å…³èŠ‚ç–¼ç—›å’Œè‚Œè‚‰ç‚ç—‡\n- **æŠ—æ°§åŒ–**: æ¸…é™¤è‡ªç”±åŸºï¼Œå»¶ç¼“ç»†èƒè€åŒ–\n- **è‚è„ä¿æŠ¤**: æ”¯æŒè‚è„è§£æ¯’åŠŸèƒ½ï¼Œä¿æŠ¤è‚ç»†èƒ",
    "Ginseng": "- **èƒ½é‡æå‡**: æé«˜ä½“åŠ›å’Œç²¾ç¥æ´»åŠ›ï¼Œå¯¹æŠ—ç–²åŠ³\n- **å…ç–«æ”¯æŒ**: å¢å¼ºæœºä½“æŠµæŠ—åŠ›ï¼Œé¢„é˜²æ„Ÿå†’\n- **è®¤çŸ¥æ”¹å–„**: æé«˜æ³¨æ„åŠ›å’Œè®°å¿†åŠ›\n- **è¡€ç³–è°ƒèŠ‚**: æœ‰åŠ©äºç¨³å®šè¡€ç³–æ°´å¹³",
    "Licorice": "- **å‘¼å¸ç³»ç»Ÿ**: ç¼“è§£å’³å—½ï¼Œæ¸…é™¤ç—°æ¶²ï¼Œä¿æŠ¤å‘¼å¸é“\n- **æ¶ˆåŒ–å¥åº·**: ä¿æŠ¤èƒƒé»è†œï¼Œç¼“è§£èƒƒéƒ¨ç‚ç—‡\n- **æŠ—ç—…æ¯’**: å¯¹å¤šç§ç—…æ¯’å…·æœ‰æŠ‘åˆ¶ä½œç”¨\n- **æ¿€ç´ è°ƒèŠ‚**: æ”¯æŒè‚¾ä¸Šè…ºåŠŸèƒ½",
    "Echinacea": "- **å…ç–«å¢å¼º**: åˆºæ¿€å…ç–«ç»†èƒæ´»æ€§ï¼Œæé«˜æŠ—ç—…èƒ½åŠ›\n- **æŠ—ç—…æ¯’**: å¯¹æµæ„Ÿå’Œæ™®é€šæ„Ÿå†’ç—…æ¯’æœ‰æ•ˆ\n- **æŠ—ç‚ä½œç”¨**: å‡è½»ç‚ç—‡ååº”\n- **ä¼¤å£æ„ˆåˆ**: ä¿ƒè¿›çš®è‚¤å’Œé»è†œä¿®å¤",
    "Peppermint": "- **æ¶ˆåŒ–æ”¯æŒ**: ç¼“è§£èƒƒè‚ ç—‰æŒ›ï¼Œä¿ƒè¿›æ¶ˆåŒ–\n- **å‘¼å¸æ¸…æ–°**: æ¸…æ´å£è…”ï¼Œç¼“è§£å£è‡­\n- **é•‡ç—›ä½œç”¨**: ç¼“è§£å¤´ç—›å’Œè‚Œè‚‰ç–¼ç—›\n- **æ¸…çƒ­è§£æ¯’**: æ¸…é™¤ä½“å†…çƒ­æ¯’ï¼Œé™æ¸©é€€çƒ­",
    "Chamomile": "- **ç¡çœ æ”¹å–„**: ä¿ƒè¿›æ·±åº¦ç¡çœ ï¼Œç¼“è§£å¤±çœ \n- **æŠ—ç„¦è™‘**: é•‡é™ç¥ç»ï¼Œç¼“è§£ç´§å¼ æƒ…ç»ª\n- **æ¶ˆåŒ–æ”¯æŒ**: ç¼“è§£èƒƒè‚ ä¸é€‚ï¼Œå‡å°‘èƒ€æ°”\n- **çš®è‚¤æŠ¤ç†**: æŠ—ç‚æŠ—æ•ï¼Œèˆ’ç¼“çš®è‚¤",
    "Ginger": "- **æ¶ˆåŒ–ä¿ƒè¿›**: åˆºæ¿€èƒƒè‚ è •åŠ¨ï¼Œæ”¹å–„æ¶ˆåŒ–ä¸è‰¯\n- **æŠ—æ¶å¿ƒ**: ç¼“è§£æ™•è½¦ã€å­•åç­‰æ¶å¿ƒç—‡çŠ¶\n- **æŠ—ç‚æ­¢ç—›**: ç¼“è§£å…³èŠ‚å’Œè‚Œè‚‰ç–¼ç—›\n- **å¾ªç¯æ”¹å–„**: ä¿ƒè¿›è¡€æ¶²å¾ªç¯ï¼Œæ¸©æš–èº«ä½“",
    "Ashwagandha": "- **å‹åŠ›ç¼“è§£**: é™ä½çš®è´¨é†‡æ°´å¹³ï¼Œå‡å°‘å‹åŠ›ååº”\n- **èƒ½é‡æå‡**: æé«˜ä½“åŠ›å’Œè€åŠ›ï¼Œå¯¹æŠ—ç–²åŠ³\n- **è®¤çŸ¥æ”¯æŒ**: æ”¹å–„è®°å¿†åŠ›å’Œæ³¨æ„åŠ›\n- **å…ç–«å¹³è¡¡**: è°ƒèŠ‚å…ç–«ç³»ç»ŸåŠŸèƒ½",
    "Milk Thistle": "- **è‚è„ä¿æŠ¤**: ä¿æŠ¤è‚ç»†èƒå…å—æ¯’ç´ æŸå®³\n- **è‚è„ä¿®å¤**: ä¿ƒè¿›å—æŸè‚ç»†èƒå†ç”Ÿ\n- **è§£æ¯’æ”¯æŒ**: å¢å¼ºè‚è„è§£æ¯’åŠŸèƒ½\n- **æŠ—æ°§åŒ–**: æ¸…é™¤è‚è„ä¸­çš„è‡ªç”±åŸº",
    "Valerian": "- **ç¡çœ ä¿ƒè¿›**: ç¼©çŸ­å…¥ç¡æ—¶é—´ï¼Œæé«˜ç¡çœ è´¨é‡\n- **ç¥ç»é•‡é™**: ç¼“è§£ç¥ç»ç´§å¼ å’Œç„¦è™‘\n- **è‚Œè‚‰æ”¾æ¾**: ç¼“è§£è‚Œè‚‰ç´§å¼ å’Œç—‰æŒ›\n- **æƒ…ç»ªç¨³å®š**: å¹³å¤æƒ…ç»ªæ³¢åŠ¨ï¼Œå‡å°‘çƒ¦èº"
  };
  return efficacy[herbName] || "- å…·æœ‰å¤šç§æœ‰ç›Šçš„ç”Ÿç‰©æ´»æ€§\n- æ”¯æŒèº«ä½“è‡ªç„¶å¥åº·åŠŸèƒ½\n- æé«˜æ•´ä½“å¥åº·æ°´å¹³";
}

function getUsageGuidance(herbName) {
  const guidance = {
    "Turmeric": "- å»ºè®®é¤å30åˆ†é’Ÿå†…æœç”¨ï¼Œä»¥å‡å°‘èƒƒè‚ åˆºæ¿€\n- å¯ä¸é»‘èƒ¡æ¤’æˆ–è„‚è‚ªä¸€èµ·æœç”¨ä»¥æé«˜å¸æ”¶ç‡\n- è¿ç»­ä½¿ç”¨ä¸å®œè¶…è¿‡8å‘¨ï¼Œå»ºè®®é—´æ­‡æ€§ä½¿ç”¨\n- å¦‚æœ‰æ…¢æ€§ç–¾ç—…ï¼Œè¯·åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹ä½¿ç”¨",
    "Ginseng": "- æœ€å¥½åœ¨æ—©æ™¨ç©ºè…¹æœç”¨ï¼Œé¿å…å½±å“ç¡çœ \n- å¯ä¸èœ‚èœœæˆ–æ¸©æ°´ä¸€èµ·æœç”¨\n- å»ºè®®å¾ªç¯ä½¿ç”¨ï¼šä½¿ç”¨2-3ä¸ªæœˆåä¼‘æ¯1ä¸ªæœˆ\n- é¿å…ä¸å’–å•¡å› åŒæ—¶æœç”¨",
    "Licorice": "- å»ºè®®é¤åæœç”¨ï¼Œå‡å°‘èƒƒè‚ åˆºæ¿€\n- å¯åˆ¶æˆèŒ¶é¥®ï¼Œæ¯æ—¥2-3æ¬¡\n- ä¸å®œä¸åˆ©å°¿å‰‚åŒæ—¶ä½¿ç”¨\n- å®šæœŸç›‘æµ‹è¡€å‹å’Œè¡€é’¾æ°´å¹³",
    "Echinacea": "- æ„Ÿå†’åˆæœŸæœç”¨æ•ˆæœæœ€ä½³\n- å¯ä¸ç»´ç”Ÿç´ Cé…åˆä½¿ç”¨\n- å»ºè®®çŸ­æœŸä½¿ç”¨ï¼Œä¸è¶…è¿‡è¿ç»­8å‘¨\n- è¿‡æ•ä½“è´¨è€…é¦–æ¬¡ä½¿ç”¨éœ€å°å¿ƒè§‚å¯Ÿ",
    "Peppermint": "- å¯é¤å‰æˆ–é¤åæœç”¨\n- è‚ æº¶èƒ¶å›Šåº”æ•´ç²’åæœï¼Œä¸è¦åš¼ç¢\n- å¯åˆ¶æˆèŒ¶é¥®ï¼Œæ¸©çƒ­é¥®ç”¨\n- é¿å…ä¸èƒƒé…¸æŠ‘åˆ¶å‰‚åŒæ—¶æœç”¨",
    "Chamomile": "- ç¡å‰30-60åˆ†é’Ÿæœç”¨æ•ˆæœæœ€ä½³\n- å¯åˆ¶æˆèŒ¶é¥®ï¼Œæ¸©çƒ­é¥®ç”¨\n- å¯ä¸è–°è¡£è‰ç­‰å…¶ä»–é•‡é™è‰è¯é…åˆ\n- å­•å¦‡å’Œå“ºä¹³æœŸå¦‡å¥³åº”è°¨æ…ä½¿ç”¨",
    "Ginger": "- å»ºè®®é¤åæœç”¨ï¼Œé¿å…ç©ºè…¹\n- å¯æ–°é²œåˆ‡ç‰‡æ³¡èŒ¶æˆ–åŠ å…¥é£Ÿç‰©ä¸­\n- æ™•è½¦å‰30åˆ†é’Ÿæœç”¨é¢„é˜²æ•ˆæœæ›´ä½³\n- å¯ä¸æŸ æª¬å’Œèœ‚èœœé…åˆåˆ¶æˆé¥®å“",
    "Ashwagandha": "- å¯ç©ºè…¹æˆ–é¤åæœç”¨\n- å»ºè®®åˆ†æ—©æ™šä¸¤æ¬¡æœç”¨\n- å¯ä¸æ¸©ç‰›å¥¶ä¸€èµ·æœç”¨å¢å¼ºæ•ˆæœ\n- å»ºè®®è¿ç»­ä½¿ç”¨è‡³å°‘4-6å‘¨æ‰èƒ½è§æ•ˆ",
    "Milk Thistle": "- å»ºè®®é¤åæœç”¨ï¼Œæé«˜å¸æ”¶ç‡\n- éœ€é…åˆå……è¶³çš„æ°´åˆ†æ‘„å…¥\n- å¯ä¸å…¶ä»–æŠ¤è‚è‰è¯é…åˆä½¿ç”¨\n- å®šæœŸæ£€æŸ¥è‚åŠŸèƒ½æŒ‡æ ‡",
    "Valerian": "- ç¡å‰30-60åˆ†é’Ÿæœç”¨\n- é¿å…ä¸é…’ç²¾åŒæ—¶ä½¿ç”¨\n- å¯ä¸æ´‹ç”˜èŠç­‰å…¶ä»–é•‡é™è‰è¯é…åˆ\n- åˆæ¬¡ä½¿ç”¨å¯èƒ½éœ€è¦æ•°å¤©æ‰èƒ½è§æ•ˆ"
  };
  return guidance[herbName] || "- éµå¾ªäº§å“è¯´æ˜ä¹¦æŒ‡å¯¼\n- ä»å°å‰‚é‡å¼€å§‹ä½¿ç”¨\n- æ³¨æ„è§‚å¯Ÿèº«ä½“ååº”\n- å¦‚æœ‰ä¸é€‚ç«‹å³åœç”¨";
}

function getSafetyAssessment(safetyLevel) {
  const assessments = {
    "é«˜": "- ä¸€èˆ¬æˆäºº: ä½é£é™©\n- çŸ­æœŸä½¿ç”¨: éå¸¸å®‰å…¨\n- é•¿æœŸä½¿ç”¨: éœ€è¦ç›‘æµ‹\n- ç‰¹æ®Šäººç¾¤: éœ€è¦æ³¨æ„ç¦å¿Œç—‡",
    "ä¸­": "- ä¸€èˆ¬æˆäºº: ä¸­ç­‰é£é™©\n- çŸ­æœŸä½¿ç”¨: ç›¸å¯¹å®‰å…¨\n- é•¿æœŸä½¿ç”¨: éœ€è¦ä¸“ä¸šæŒ‡å¯¼\n- ç‰¹æ®Šäººç¾¤: éœ€è¦åŒ»ç”Ÿç›‘ç£",
    "ä½": "- éœ€è¦ä¸“ä¸šåŒ»ç”ŸæŒ‡å¯¼\n- å®šæœŸç›‘æµ‹èº«ä½“æŒ‡æ ‡\n- æ³¨æ„è¯ç‰©ç›¸äº’ä½œç”¨\n- ç‰¹æ®Šäººç¾¤ç¦ç”¨"
  };
  return assessments[safetyLevel] || "- å®‰å…¨æ€§ä¿¡æ¯ä¸å®Œæ•´ï¼Œè¯·å’¨è¯¢ä¸“ä¸šäººå£«";
}

function getDetailedPrecautions(herbName) {
  const precautions = {
    "Turmeric": "- **å­•å¦‡**: å®Œå…¨ç¦ç”¨ï¼Œå¯èƒ½å½±å“å­å®«æ”¶ç¼©\n- **å“ºä¹³æœŸ**: ä¸å»ºè®®ä½¿ç”¨\n- **èƒ†ç»“çŸ³æ‚£è€…**: ç¦ç”¨ï¼Œå¯èƒ½åŠ é‡ç—‡çŠ¶\n- **è¡€æ¶²ç–¾ç—…**: å¯èƒ½å½±å“å‡è¡€åŠŸèƒ½\n- **æ‰‹æœ¯å‰2å‘¨**: åœæ­¢ä½¿ç”¨\n- **ç³–å°¿ç—…æ‚£è€…**: å¯èƒ½å½±å“è¡€ç³–ï¼Œéœ€ç›‘æµ‹",
    "Ginseng": "- **é«˜è¡€å‹æ‚£è€…**: å¯èƒ½å‡é«˜è¡€å‹ï¼Œéœ€ç›‘æµ‹\n- **ç³–å°¿ç—…æ‚£è€…**: å¯èƒ½å½±å“è¡€ç³–æ§åˆ¶\n- **å¤±çœ æ‚£è€…**: é¿å…æ™šé—´æœç”¨\n- **å„¿ç«¥**: ä¸å»ºè®®ä½¿ç”¨\n- **å­•å¦‡å“ºä¹³æœŸ**: é¿å…ä½¿ç”¨",
    "Licorice": "- **é«˜è¡€å‹æ‚£è€…**: å¯èƒ½åŠ é‡é«˜è¡€å‹\n- **å¿ƒè„ç—…æ‚£è€…**: å¯èƒ½å½±å“å¿ƒå¾‹\n- **è‚¾è„ç–¾ç—…**: å¯èƒ½å½±å“ç”µè§£è´¨å¹³è¡¡\n- **å­•å¦‡**: å¤§å‰‚é‡å¯èƒ½å½±å“èƒå„¿\n- **é•¿æœŸä½¿ç”¨**: å¯èƒ½å¯¼è‡´å‡æ€§é†›å›ºé…®å¢å¤šç—‡",
    "Echinacea": "- **è‡ªèº«å…ç–«ç–¾ç—…**: å¯èƒ½åŠ é‡ç—‡çŠ¶\n- **è¿‡æ•ä½“è´¨**: å¯èƒ½å¼•èµ·è¿‡æ•ååº”\n- **å…ç–«æŠ‘åˆ¶å‰‚ä½¿ç”¨è€…**: å¯èƒ½å½±å“è¯æ•ˆ\n- **å„¿ç«¥**: éœ€è¦è°ƒæ•´å‰‚é‡\n- **é•¿æœŸä½¿ç”¨**: å¯èƒ½é™ä½å…ç–«æ•ˆæœ",
    "Peppermint": "- **å„¿ç«¥**: è–„è·è„‘å¯èƒ½å¼•èµ·å‘¼å¸å›°éš¾\n- **èƒƒé£Ÿç®¡åæµ**: å¯èƒ½åŠ é‡ç—‡çŠ¶\n- **èƒ†å›Šç–¾ç—…**: å¯èƒ½è¯±å‘èƒ†ç»ç—›\n- **è¿‡æ•ä½“è´¨**: å¯èƒ½å¼•èµ·çš®è‚¤è¿‡æ•\n- **å­•å¦‡**: å¤§å‰‚é‡å¯èƒ½å½±å“èƒå„¿",
    "Chamomile": "- **èŠèŠ±è¿‡æ•**: å¯èƒ½äº¤å‰è¿‡æ•\n- **å­•å¦‡**: å¯èƒ½å¼•èµ·å­å®«æ”¶ç¼©\n- **å“ºä¹³æœŸ**: å¯èƒ½å½±å“ä¹³æ±åˆ†æ³Œ\n- **ä½è¡€å‹**: å¯èƒ½è¿›ä¸€æ­¥é™è¡€å‹\n- **æ‰‹æœ¯å‰**: å¯èƒ½å½±å“éº»é†‰æ•ˆæœ",
    "Ginger": "- **èƒƒæºƒç–¡**: å¯èƒ½åˆºæ¿€èƒƒé»è†œ\n- **èƒ†ç»“çŸ³**: å¯èƒ½è¯±å‘èƒ†ç»ç—›\n- **è¡€æ¶²ç–¾ç—…**: å¯èƒ½å½±å“å‡è¡€\n- **é«˜è¡€å‹**: å¤§å‰‚é‡å¯èƒ½å½±å“è¡€å‹\n- **æ‰‹æœ¯å‰**: åœæ­¢ä½¿ç”¨ä»¥é¿å…å‡ºè¡€é£é™©",
    "Ashwagandha": "- **å­•å¦‡å“ºä¹³æœŸ**: å®Œå…¨ç¦ç”¨\n- **è‡ªèº«å…ç–«ç–¾ç—…**: å¯èƒ½åˆºæ¿€å…ç–«ç³»ç»Ÿ\n- **ç”²çŠ¶è…ºç–¾ç—…**: å¯èƒ½å½±å“ç”²çŠ¶è…ºåŠŸèƒ½\n- **è¡€ç³–å¼‚å¸¸**: å¯èƒ½å½±å“è¡€ç³–æ°´å¹³\n- **æ‰‹æœ¯å‰**: å¯èƒ½å½±å“è¡€ç³–å’Œè¡€å‹",
    "Milk Thistle": "- **è¿‡æ•ä½“è´¨**: å¯èƒ½å¼•èµ·è¿‡æ•ååº”\n- **æ¿€ç´ æ•æ„Ÿç–¾ç—…**: å¯èƒ½æœ‰è½»å¾®é›Œæ¿€ç´ æ ·ä½œç”¨\n- **ç³–å°¿ç—…**: å¯èƒ½å½±å“è¡€ç³–\n- **å­•å¦‡å“ºä¹³æœŸ**: å®‰å…¨æ€§æœªå®Œå…¨ç¡®å®š\n- **è¯ç‰©ç›¸äº’ä½œç”¨**: å¯èƒ½å½±å“è‚è„ä»£è°¢è¯ç‰©",
    "Valerian": "- **å­•å¦‡å“ºä¹³æœŸ**: å®‰å…¨æ€§æœªå®Œå…¨ç¡®å®š\n- **è‚è„ç–¾ç—…**: å¯èƒ½åŠ é‡è‚è„è´Ÿæ‹…\n- **æ‰‹æœ¯å‰**: å¯èƒ½å¢å¼ºéº»é†‰æ•ˆæœ\n- **é©¾é©¶æ“ä½œ**: å¯èƒ½å½±å“ååº”èƒ½åŠ›\n- **é…’ç²¾**: é¿å…åŒæ—¶ä½¿ç”¨"
  };
  return precautions[herbName] || "- ç‰¹æ®Šäººç¾¤ä½¿ç”¨å‰è¯·å’¨è¯¢åŒ»ç”Ÿ\n- æ³¨æ„è§‚å¯Ÿä¸è‰¯ååº”\n- é¿å…ä¸è¯ç‰©åŒæ—¶ä½¿ç”¨\n- å¦‚æœ‰ä¸é€‚ç«‹å³åœç”¨";
}

function getTCMAnalysis(constitution) {
  const analysis = {
    "æ¹¿çƒ­ä½“è´¨": "- **æ¹¿çƒ­ä½“è´¨**: æœ€ä¸ºé€‚å®œï¼Œèƒ½æ¸…çƒ­ç‡¥æ¹¿\n- **è¡€ç˜€ä½“è´¨**: è¾ƒä¸ºé€‚å®œï¼Œæœ‰æ´»è¡€åŒ–ç˜€ä½œç”¨\n- **æ°”éƒä½“è´¨**: ä¸€èˆ¬é€‚å®œï¼Œèƒ½ç–è‚ç†æ°”\n- **ä¸é€‚å®œä½“è´¨**: é˜³è™šã€é˜´è™šä½“è´¨éœ€è°¨æ…ä½¿ç”¨",
    "æ°”è™šä½“è´¨": "- **æ°”è™šä½“è´¨**: æœ€ä¸ºé€‚å®œï¼Œèƒ½è¡¥æ°”å›ºæœ¬\n- **é˜³è™šä½“è´¨**: è¾ƒä¸ºé€‚å®œï¼Œæœ‰æ¸©é˜³ä½œç”¨\n- **è¡€è™šä½“è´¨**: ä¸€èˆ¬é€‚å®œï¼Œèƒ½æ°”è¡€åŒè¡¥\n- **ä¸é€‚å®œä½“è´¨**: å®çƒ­ã€æ¹¿çƒ­ä½“è´¨éœ€è°¨æ…",
    "æ¹¿å¯’ä½“è´¨": "- **æ¹¿å¯’ä½“è´¨**: æœ€ä¸ºé€‚å®œï¼Œèƒ½æ¸©ä¸­æ•£å¯’\n- **é˜³è™šä½“è´¨**: è¾ƒä¸ºé€‚å®œï¼Œæœ‰æ¸©é˜³ä½œç”¨\n- **ç—°æ¹¿ä½“è´¨**: ä¸€èˆ¬é€‚å®œï¼Œèƒ½åŒ–æ¹¿é™¤ç—°\n- **ä¸é€‚å®œä½“è´¨**: å®çƒ­ã€é˜´è™šä½“è´¨éœ€è°¨æ…",
    "ä½“è´¨åå¯’": "- **é˜³è™šä½“è´¨**: æœ€ä¸ºé€‚å®œï¼Œèƒ½æ¸©é˜³æ•£å¯’\n- **æ°”è™šä½“è´¨**: è¾ƒä¸ºé€‚å®œï¼Œèƒ½è¡¥æ°”åŠ©é˜³\n- **æ¹¿å¯’ä½“è´¨**: ä¸€èˆ¬é€‚å®œï¼Œèƒ½é™¤æ¹¿æ•£å¯’\n- **ä¸é€‚å®œä½“è´¨**: å®çƒ­ã€æ¹¿çƒ­ä½“è´¨éœ€è°¨æ…"
  };
  return analysis[constitution] || "- é€‚åˆå¤šç§ä½“è´¨ä½¿ç”¨\n- å»ºè®®æ ¹æ®ä¸ªäººä½“è´¨è°ƒæ•´ç”¨é‡\n- å¦‚æœ‰ç–‘é—®è¯·å’¨è¯¢ä¸­åŒ»å¸ˆ\n- æ³¨æ„è§‚å¯Ÿèº«ä½“ååº”";
}

function getCaseStudies(herbName) {
  // ä¸ºæ¯ä¸ªè‰è¯ç”Ÿæˆ2-3ä¸ªè¯¦ç»†æ¡ˆä¾‹
  const cases = {
    "Turmeric": "**æ¡ˆä¾‹A - å…³èŠ‚ç‚ç¼“è§£**\n- æ‚£è€…ä¿¡æ¯: 45å²å¥³æ€§ï¼Œè½»åº¦éª¨å…³èŠ‚ç‚\n- ä½¿ç”¨æ–¹æ¡ˆ: æ¯æ—¥400mgå§œé»„ç´ ï¼Œé¤åæœç”¨\n- ä½¿ç”¨å‘¨æœŸ: è¿ç»­3ä¸ªæœˆ\n- æ•ˆæœè¯„ä¼°: å…³èŠ‚ç–¼ç—›å‡è½»60%ï¼Œæ´»åŠ¨åº¦æ˜æ˜¾æ”¹å–„\n- å‰¯ä½œç”¨: æ— æ˜æ˜¾ä¸è‰¯ååº”\n\n**æ¡ˆä¾‹B - æ¶ˆåŒ–æ”¹å–„**\n- æ‚£è€…ä¿¡æ¯: 38å²ç”·æ€§ï¼Œæ…¢æ€§èƒƒç‚\n- ä½¿ç”¨æ–¹æ¡ˆ: æ¯æ—¥300mgï¼Œåˆ†ä¸¤æ¬¡é¤åæœç”¨\n- ä½¿ç”¨å‘¨æœŸ: 2ä¸ªæœˆ\n- æ•ˆæœè¯„ä¼°: èƒƒéƒ¨ä¸é€‚æ„Ÿæ˜æ˜¾å‡è½»ï¼Œé£Ÿæ¬²æ”¹å–„\n- å‰¯ä½œç”¨: å¶æœ‰è½»å¾®èƒƒéƒ¨æ¸©çƒ­æ„Ÿ",
    "Ginseng": "**æ¡ˆä¾‹A - ç–²åŠ³æ”¹å–„**\n- æ‚£è€…ä¿¡æ¯: 42å²ç”·æ€§ï¼Œæ…¢æ€§ç–²åŠ³\n- ä½¿ç”¨æ–¹æ¡ˆ: æ¯æ—¥300mgï¼Œæ—©æ™¨ç©ºè…¹æœç”¨\n- ä½¿ç”¨å‘¨æœŸ: 6å‘¨\n- æ•ˆæœè¯„ä¼°: ç²¾åŠ›æ˜æ˜¾æå‡ï¼Œå·¥ä½œæ•ˆç‡æé«˜\n- å‰¯ä½œç”¨: åˆæœŸè½»å¾®å¤±çœ ï¼Œ2å‘¨åé€‚åº”\n\n**æ¡ˆä¾‹B - å…ç–«æå‡**\n- æ‚£è€…ä¿¡æ¯: 35å²å¥³æ€§ï¼Œç»å¸¸æ„Ÿå†’\n- ä½¿ç”¨æ–¹æ¡ˆ: æ¯æ—¥200mgï¼Œè¿ç»­ä½¿ç”¨2ä¸ªæœˆ\n- ä½¿ç”¨å‘¨æœŸ: 2ä¸ªæœˆï¼Œä¼‘æ¯1ä¸ªæœˆåé‡å¤\n- æ•ˆæœè¯„ä¼°: æ„Ÿå†’é¢‘ç‡å‡å°‘70%\n- å‰¯ä½œç”¨: æ— æ˜æ˜¾ä¸è‰¯ååº”"
  };
  
  // ä¸ºå…¶ä»–è‰è¯ç”ŸæˆåŸºæœ¬æ¡ˆä¾‹æ¨¡æ¿
  if (!cases[herbName]) {
    return `**æ¡ˆä¾‹A - ä¸»è¦åŠŸæ•ˆéªŒè¯**\n- æ‚£è€…ä¿¡æ¯: æˆå¹´ç”¨æˆ·ï¼Œç›¸å…³ç—‡çŠ¶\n- ä½¿ç”¨æ–¹æ¡ˆ: æŒ‰æ¨èå‰‚é‡æœç”¨\n- ä½¿ç”¨å‘¨æœŸ: 4-8å‘¨\n- æ•ˆæœè¯„ä¼°: ç—‡çŠ¶æ˜æ˜¾æ”¹å–„\n- å‰¯ä½œç”¨: æ— æ˜æ˜¾ä¸è‰¯ååº”\n\n**æ¡ˆä¾‹B - é•¿æœŸä½¿ç”¨æ•ˆæœ**\n- æ‚£è€…ä¿¡æ¯: é•¿æœŸç”¨æˆ·è·Ÿè¸ª\n- ä½¿ç”¨æ–¹æ¡ˆ: æ ‡å‡†å‰‚é‡ï¼Œé—´æ­‡ä½¿ç”¨\n- ä½¿ç”¨å‘¨æœŸ: 6ä¸ªæœˆ\n- æ•ˆæœè¯„ä¼°: æ•´ä½“å¥åº·çŠ¶å†µæ”¹å–„\n- å‰¯ä½œç”¨: å¶æœ‰è½»å¾®èƒƒè‚ ååº”`;
  }
  
  return cases[herbName];
}

function getUsageSummary(herbName) {
  return `1. **æ–°æ‰‹ç”¨æˆ·**: ä»å°å‰‚é‡å¼€å§‹ï¼Œè§‚å¯Ÿèº«ä½“ååº”
2. **é•¿æœŸç”¨æˆ·**: å»ºè®®é—´æ­‡æ€§ä½¿ç”¨ï¼Œå®šæœŸè¯„ä¼°æ•ˆæœ
3. **ç‰¹æ®Šäººç¾¤**: å­•å¦‡ã€å“ºä¹³æœŸã€ç‰¹å®šç–¾ç—…æ‚£è€…éœ€é¿å…æˆ–æ…ç”¨
4. **æœ€ä½³æ­é…**: å¯ä¸å…¶ä»–å¤©ç„¶æˆåˆ†æ­é…ä½¿ç”¨ï¼Œå¢å¼ºæ•ˆæœ
5. **å‚¨å­˜å»ºè®®**: é˜´å‡‰å¹²ç‡¥å¤„ä¿å­˜ï¼Œé¿å…é˜³å…‰ç›´å°„å’Œé«˜æ¸©`;
}

// åˆ›å»ºå•ä¸ªè‰è¯é¡µé¢
async function createHerbPage(herb) {
  try {
    console.log(`ğŸ“ æ­£åœ¨åˆ›å»º ${herb.herbName} (${herb.chineseName}) é¡µé¢...`);
    
    const detailContent = generateDetailedContent(herb);
    
    const response = await notion.pages.create({
      parent: { database_id: databaseId },
      properties: {
        "Herb Name": {
          title: [{ text: { content: herb.herbName } }]
        },
        "ä¸­æ–‡å": {
          rich_text: [{ text: { content: herb.chineseName } }]
        },
        "ç®€è¦æè¿°": {
          rich_text: [{ text: { content: herb.briefDescription } }]
        },
        "æˆåˆ†æ„æˆ": {
          rich_text: [{ text: { content: herb.composition } }]
        },
        "æ¨èå‰‚é‡": {
          rich_text: [{ text: { content: herb.recommendedDosage } }]
        },
        "åŠŸæ•ˆåˆ†ç±»": {
          multi_select: herb.efficacyCategory.map(category => ({ name: category }))
        },
        "ä½¿ç”¨å»ºè®®": {
          rich_text: [{ text: { content: herb.usageRecommendations } }]
        },
        "å®‰å…¨æ€§ç­‰çº§": {
          select: { name: herb.safetyLevel }
        },
        "æ³¨æ„äº‹é¡¹": {
          rich_text: [{ text: { content: herb.precautions } }]
        },
        "ä¸­åŒ»ä½“è´¨åŒ¹é…": {
          rich_text: [{ text: { content: herb.tcmConstitution } }]
        },
        "æ¡ˆä¾‹åˆ†æ": {
          rich_text: [{ text: { content: herb.caseStudy } }]
        }
      },
      children: [
        {
          object: "block",
          type: "paragraph",
          paragraph: {
            rich_text: [
              {
                type: "text",
                text: {
                  content: detailContent
                }
              }
            ]
          }
        }
      ]
    });
    
    console.log(`âœ… ${herb.herbName} é¡µé¢åˆ›å»ºæˆåŠŸ! ID: ${response.id}`);
    return response;
    
  } catch (error) {
    console.error(`âŒ åˆ›å»º ${herb.herbName} é¡µé¢å¤±è´¥:`, error.body || error.message);
    return null;
  }
}

// æ‰¹é‡åˆ›å»ºæ‰€æœ‰è‰è¯é¡µé¢
async function createAllHerbs() {
  console.log("ğŸŒ¿ å¼€å§‹æ‰¹é‡åˆ›å»ºè‰è¯æ•°æ®åº“æ¡ç›®...\n");
  
  const results = [];
  const errors = [];
  
  for (let i = 0; i < herbsData.length; i++) {
    const herb = herbsData[i];
    
    try {
      const result = await createHerbPage(herb);
      if (result) {
        results.push({
          herb: herb.herbName,
          id: result.id,
          url: result.url
        });
      } else {
        errors.push(herb.herbName);
      }
      
      // æ·»åŠ å»¶è¿Ÿé¿å…APIé™åˆ¶
      if (i < herbsData.length - 1) {
        console.log("â³ ç­‰å¾…1ç§’...\n");
        await new Promise(resolve => setTimeout(resolve, 1000));
      }
      
    } catch (error) {
      console.error(`âŒ å¤„ç† ${herb.herbName} æ—¶å‡ºé”™:`, error.message);
      errors.push(herb.herbName);
    }
  }
  
  // è¾“å‡ºç»“æœç»Ÿè®¡
  console.log("\n" + "=".repeat(60));
  console.log("ğŸ“Š æ‰¹é‡åˆ›å»ºç»“æœç»Ÿè®¡:");
  console.log("=".repeat(60));
  console.log(`âœ… æˆåŠŸåˆ›å»º: ${results.length} ä¸ªè‰è¯æ¡ç›®`);
  console.log(`âŒ åˆ›å»ºå¤±è´¥: ${errors.length} ä¸ªè‰è¯æ¡ç›®`);
  
  if (results.length > 0) {
    console.log("\nğŸ‰ æˆåŠŸåˆ›å»ºçš„è‰è¯æ¡ç›®:");
    results.forEach((result, index) => {
      console.log(`${index + 1}. ${result.herb} - ID: ${result.id}`);
    });
  }
  
  if (errors.length > 0) {
    console.log("\nâš ï¸ åˆ›å»ºå¤±è´¥çš„è‰è¯:");
    errors.forEach((error, index) => {
      console.log(`${index + 1}. ${error}`);
    });
  }
  
  console.log("\nğŸ”— æ‚¨å¯ä»¥åœ¨Notionä¸­æŸ¥çœ‹æ‰€æœ‰æ–°åˆ›å»ºçš„è‰è¯é¡µé¢");
  console.log("ğŸ“ˆ ä¸‹ä¸€æ­¥: è€ƒè™‘å°†è¿™äº›æ•°æ®é›†æˆåˆ°æ‚¨çš„ç½‘ç«™ä¸­");
  
  return { success: results, failed: errors };
}

// æ‰§è¡Œæ‰¹é‡åˆ›å»º
if (require.main === module) {
  createAllHerbs();
}

module.exports = {
  herbsData,
  createHerbPage,
  createAllHerbs,
  generateDetailedContent
}; 